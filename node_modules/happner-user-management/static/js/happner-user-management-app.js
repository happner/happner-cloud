'use strict';

var happner_user_management = angular.module('happnerUserManagement', [  
  'happnerAngular',
  'ui.bootstrap',                                            
  'ngAnimate',
  'angularMoment'
]);

happner_user_management.controller('happnerUserManagementCtl', ['$rootScope', '$scope', 'happnerAngularClient', function($rootScope, $scope, happnerAngularClient) {

    $scope.authenticated = false;
    $scope.dburl = "127.0.0.1";

    $scope.dbport = window.location.port.toString();
    $scope.dbsecret = "mesh";
    $scope.view = 'network';

    $scope.changeView = function(view, action){
        $rootScope.view = view;
        $rootScope.action = action;
    }

    $scope.authenticate = function(){

    	happnerAngularClient.authenticate($scope.dburl, $scope.dbport, null, $scope.dbsecret, function(e, client){

          console.log(e, client);

          $scope.authenticated = true;
          $scope.$apply();

        });
    }   
    
}]);

